<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Admin — Reply</title>
<style>
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 0; background: #0b1220; color: #e8eefc; }
.wrap { max-width: 980px; margin: 0 auto; padding: 28px 16px; }
.card { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.10); border-radius: 14px; padding: 16px; }
h1 { font-size: 18px; margin: 0 0 10px; }
.muted { color: rgba(232,238,252,0.7); font-size: 12px; }
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 12px; }
select, input, textarea { width: 100%; border-radius: 12px; padding: 10px; border: 1px solid rgba(255,255,255,0.16); background: rgba(0,0,0,0.35); color: #e8eefc; }
textarea { min-height: 200px; }
button { border: 0; border-radius: 12px; padding: 10px 14px; font-weight: 700; cursor: pointer; background:#4f7cff; color:white; }
.box { background: rgba(0,0,0,0.30); border: 1px solid rgba(255,255,255,0.10); border-radius: 12px; padding: 12px; }
a { color: #9db6ff; text-decoration:none; }
</style>
</head>
<body>
<div class="wrap">
<div class="card">
<h1>{{ t.company_name }} — Reply</h1>
<div class="muted">{{ t.contact_email }}</div>
<div class="box" style="margin-top:12px;">
<div class="muted">Latest reply snippet</div>
<div style="margin-top:6px;">{{ snippet }}</div>
</div>
<form method="post" action="/admin/replies/{{ t.id }}/send" style="margin-top:12px;">
<div class="grid">
<div>
<div class="muted">Canned template</div>
<select name="template_key" id="tpl" onchange="applyTemplate()">
{% for k,v in templates.items() %}
<option value="{{ k }}">{{ k }}</option>
{% endfor %}
</select>
</div>
<div>
<div class="muted">Subject</div>
<input name="subject" id="subject" placeholder="Subject line"/>
</div>
</div>
<div style="margin-top:12px;">
<div class="muted">Body</div>
<textarea name="body" id="body" placeholder="Write the reply..."></textarea>
</div>
<div style="margin-top:12px; display:flex; gap:10px;">
<button type="submit">Send Reply</button>
<a href="/admin/replies" class="muted" style="align-self:center;">Back</a>
</div>
</form>
</div>
</div>
<script>
const TEMPLATES = {{ templates | tojson }};
function applyTemplate(){
const k = document.getElementById("tpl").value;
const t = TEMPLATES[k];
document.getElementById("subject").value = t.subject;
document.getElementById("body").value = t.body;
}
applyTemplate();
</script>
</body>
</html>
