{% extends "base_app.html" %}
{% block title %}Approvals - TensorMarketData{% endblock %}
{% block content %}
<div class="container section">
<div class="h1">Approval Queue</div>
<p class="muted mb-2">1–3★ reviews require your approval before posting.</p>

{% if pending %}
<div class="table-wrap">
<table>
<thead>
<tr>
<th>Rating</th>
<th>Review</th>
<th>Location</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
{% for r in pending %}
<tr>
<td style="white-space:nowrap">
{% if r.rating <= 2 %}<span class="badge red">{{ r.rating }}★</span>
{% else %}<span class="badge yellow">{{ r.rating }}★</span>{% endif %}
</td>
<td>
<div style="max-width:300px">{{ r.comment[:100] }}{% if r.comment|length > 100 %}...{% endif %}</div>
<div class="small muted">{{ r.reviewer_name or "Anonymous" }} • {{ r.review_time[:10] if r.review_time else "" }}</div>
</td>
<td>{{ r.location_name or "—" }}</td>
<td style="white-space:nowrap">
<form method="post" action="/app/approvals/{{ r.id }}/approve" style="display:inline">
<button type="submit" class="btn small success">Approve</button>
</form>
<form method="post" action="/app/approvals/{{ r.id }}/reject" style="display:inline">
<button type="submit" class="btn small ghost">Reject</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>
{% else %}
<div class="card pad">
<p class="muted">No pending approvals. All caught up!</p>
</div>
{% endif %}
</div>
{% endblock %}
