{% extends "base_app.html" %}
{% block title %}Settings - TensorMarketData{% endblock %}
{% block content %}
<div class="container section">
<div class="h1">Settings</div>

{% if onboarding %}
<div class="card pad mb-2">
<div class="h2">Connect Google Business Profile</div>
<p class="muted mb-2">Authorize us to read and reply to your reviews.</p>
<a href="/app/connect/google" class="btn primary">Connect Google</a>
</div>
{% endif %}

<div class="grid2">
<div class="card pad">
<div class="h2">Profile</div>
<form method="post" action="/app/settings/update">
<label>Business Name</label>
<input name="name" value="{{ client.name if client else '' }}" />
<label>Email</label>
<input name="email" value="{{ client.email if client else '' }}" disabled />
<label>Plan</label>
<input value="{{ client.plan|upper if client else 'STARTER' }}" disabled />
<div class="mt-2">
<button type="submit" class="btn primary">Save</button>
</div>
</form>
</div>

<div class="card pad">
<div class="h2">Approval Settings</div>
<form method="post" action="/app/settings/approval">
<label>Approval Email</label>
<input name="approval_email" value="{{ client.approval_email if client else '' }}" placeholder="you@business.com" />
<p class="small muted mb-2">1–3★ replies will be sent here for approval.</p>
<label>
<input type="checkbox" name="auto_post_4star" {% if client.auto_post_4star %}checked{% endif %} style="width:auto" />
Auto-post 4★ replies (skip approval)
</label>
<div class="mt-2">
<button type="submit" class="btn primary">Save</button>
</div>
</form>
</div>
</div>

<div class="card pad mt-4">
<div class="h2">Danger Zone</div>
<p class="muted mb-2">Irreversible actions.</p>
<form method="post" action="/app/settings/disable">
<button type="submit" class="btn danger">Disable Auto-Replies</button>
</form>
</div>
</div>
{% endblock %}
